<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>Parabola</title>
</head>
<style type="text/css" media="Screen">
a{text-decoration:none;color:blue;}
a:hover{text-decoration:underline;}
a:visited{color:blue;}
li{list-style-type:none;cursor:pointer;padding-left: 7px;padding-right: 27px;}
//li{list-style-type:none;cursor:pointer;padding-left: 7px;outline: 1px solid black}
i{padding: 7px;outline: 1px solid black;cursor:pointer;}
//ul{margin-right:auto;widthq:100%}
//td{cursor:pointer;}
sub{font-size:0.83rem;}
sup{font-size:0.83rem;}
//ul{display:flex;flex-direction:column-reverse;}
</style>
<body style="font-family:Arial;white-space:pre;line-height:0;"
><span id="listc" style="float:left;line-height:0.9;position: absolute;top:0;bottom:0;padding-bottom:32px;left:10px;right:0;overflow-x:overlay;overflow-y:auto;flex-direction:column-reverse;" onmousedown="return false"><br/><br/></span><script
>'use strict'

function getw(n)
{
let minw=16;
let w=Math.floor(1000/n);
if(w>51)
   w=51;
else if(w<minw)
   w=minw;
return w;
}

function setar(n)
{
tar=[];
car=[];
addfn1(n);
for(let e=0;e<n;e++)
   car.push(0);
if(fn[0].length>n)
   {maxc=fn[0][n];
   maxcz=fn[1][n];
   for(let e=0;e<n;e++)
      {let i=fn[7][e]%n;
      tar.push(i);
      car[i]++;
      }
   }
else
   {maxc=0;
   maxcz=0;
   for(let e=0;e<n;e++)
      {let i=fn[7][e]%n;
      tar.push(i);
      car[i]++;
      if(i&&car[i]>maxcz)
         maxcz++;
      maxc=Math.max(car[0],maxcz);
      }
   }
}

function addgraph(s,n,w,fsize,g)
{
let x,y,x0,y0;
for(let e=0;e<=n;e++)
   {if(e)
      {
      x0=e>1?x:0.25*w;
      y0=e>1?y:(n+1+g%3)*w;
      }
   x=e?(e-0.5)*w:1.5*w;
   y=e?(n-0.5-fn[g][e]+(graph==4?1:0))*w:(n+1+g%3)*w;
   let m=document.createElement(fgr[g]);
   if(g==0||g==3||g==6)
      {m.setAttribute('y',y-w/4);
      m.setAttribute('x',x-w/4);
      m.setAttribute('width',w/2);
      m.setAttribute('height',w/2);
      }
   else if(g==1||g==4)
      {m.setAttribute('points',(x-w/6)+','+y+' '+x+','+(y-w/4)+' '+(x+w/6)+','+y+' '+x+','+(y+w/4));
      }
   else if(g==2||g==5)
      {m.setAttribute('cx',x);
      m.setAttribute('cy',y);
      m.setAttribute('r',w/8);
      }
   m.style.fill=cgr[g];
   s.appendChild(m);
   if(e)
      {let x1=(e==1)?2.75*w:x;
      let y1=(e==1)?y0:y;
      let li=document.createElement('line');
      li.setAttribute('x1',x0);
      li.setAttribute('y1',y0);
      li.setAttribute('x2',x1);
      li.setAttribute('y2',y1);
      li.setAttribute('stroke',cgr[g]);
      li.setAttribute('stroke-width',w/wgr[g]);
      s.appendChild(li);
      }
   }
let t=document.createElement('text');
t.setAttribute('x',3*w);
t.setAttribute('y',(n+1+g%3)*w+fsize/2);
t.setAttribute('font-size',fsize+'px');
t.innerHTML=tgr[g];
s.appendChild(t);
}

function addtable(n)
{
if(graph==1)
   setar(n);
let to=1.5;
let w=getw(n);
let tu=Math.floor(n/2-0.5);

let fsize=Math.floor(w*0.5);
if(fsize>16)
   fsize=16;

listc.lastChild.remove();
listc.lastChild.remove();

let t=document.createElement('span');
t.border=2;
t.cellPadding=0;
t.style.textAlign='center';
t.style.borderSpacing='0';
t.style.width=w*n+'px';
t.style.height=w*n+'px';
t.style.border='none';
t.id='tc';

t.innerHTML+='<span id="th" style="font-size:32px"><br/>N = '+n+'</span><br/><br/>';

let d=document.createDocumentFragment();

      let s=document.createElement('svg');
      s.setAttribute('id','svg');
      s.setAttribute('width',w*(n+5));
      s.setAttribute('height',w*(n+(graph==1?maxc:graph==4?0:2)+to));
      
      if(graph==1)
      {let g=document.createElement('g');
      g.setAttribute('id','rc');
      
      let re=document.createElement('rect');
      re.setAttribute('id','zerostring');
      re.setAttribute('y',((n-1-mode*tu)%n)*w);
      re.setAttribute('x',0);
      re.setAttribute('width',w*n);
      re.setAttribute('height',w);
      re.style.fill='#f0f0f0';
      g.appendChild(re);
      
      for(let e=0;e<n;e++)
      {re=document.createElement('rect');
      re.setAttribute('id','r'+e);
      re.setAttribute('y',((n-1-e+mode*tu)%n)*w);
      re.setAttribute('x',tar[e]*w);
      re.setAttribute('width',w);
      re.setAttribute('height',w);
      re.style.fill='#ff0000';
      g.appendChild(re);
      
      re=document.createElement('rect');
      re.setAttribute('id','g'+e);
      re.setAttribute('x',e*w);
      re.setAttribute('y',w*(n+maxc-car[e]+to));
      re.setAttribute('width',w-1);
      re.setAttribute('height',w*car[e]);
      re.style.fill='#a0d7d7';
      g.appendChild(re);
      }   
      s.appendChild(g);
      }

      else if(graph==2)
         {addfn2(n);
         addgraph(s,n,w,fsize,0);
         addgraph(s,n,w,fsize,1);
         addgraph(s,n,w,fsize,2);
         }

      else if(graph==3)
         {addfn3(n);
         addgraph(s,n,w,fsize,3);
         addgraph(s,n,w,fsize,4);
         addgraph(s,n,w,fsize,5);
         }

      else if(graph==4)
         {addfn4(n);
         addgraph(s,n,w,fsize,6);
         }

      for(let e=0;e<=n;e++)
      {let li=document.createElement('line');
      li.setAttribute('id','v'+e);
      li.setAttribute('x1',w*e+(e?-0.5:0.5));
      li.setAttribute('y1',0);
      li.setAttribute('x2',w*e+(e?-0.5:0.5));
      li.setAttribute('y2',w*n);
      li.setAttribute('stroke','black');
      s.appendChild(li);
      
      li=document.createElement('line');
      li.setAttribute('id','h'+e);
      li.setAttribute('x1',0);
      li.setAttribute('y1',w*e+(e?-0.5:0.5));
      li.setAttribute('x2',w*n);
      li.setAttribute('y2',w*e+(e?-0.5:0.5));
      li.setAttribute('stroke','black');
      s.appendChild(li);}
      
      
      for(let e=0;e<n;e++)
      {let t=document.createElement('text');
      t.setAttribute('id','x'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',n*w+fsize+1);
      t.setAttribute('font-size',fsize+'px');
      t.setAttribute('text-anchor','middle');
      t.innerHTML=e+(graph>1?1:0);
      s.appendChild(t);

      t=document.createElement('text');
      t.setAttribute('id','y'+e);
      t.setAttribute('x',n*w+7);
      t.setAttribute('y',(e+0.6)*w);
      t.setAttribute('font-size',fsize+'px');
      t.innerHTML=n-e-(graph==4?0:1)-mode*tu;
      s.appendChild(t);
      
      if(graph==1)
      {t=document.createElement('text');
      t.setAttribute('id','t'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',(n+maxc-car[e]+to-0.5)*w+fsize-1);
      t.setAttribute('font-size',fsize+'px');
      t.setAttribute('text-anchor','middle');
      t.innerHTML=car[e];
      s.appendChild(t);
      }
      }
      
      d.appendChild(s);

t.appendChild(d);

listc.appendChild(t); 

listc.innerHTML+='<span><br/><br/><br/><br/>Graphs: <i id="gr1"><b><big> 1 </big></b></i> <i id="gr2"><b><big> 2 </big></b></i> <i id="gr3"><b><big> 3 </big></b></i> <i id="gr4"><b><big> 4 </big></b></i> <i style="padding:0;outline:none;cursor:default;"><small>(use "1", "2", "3", "4" keys)</small></i><br/><br/><br/><br/> <i id="removetables100"><b>N - 100</b></i>        <i id="removetables10"><b>N - 10</b></i>        <i id="removetable"><b>N - 1</b> <small>(use "Backspace" key)</small></i>        <i id="addtable"><b>N + 1</b> <small>(use "Space" key)</small></i>        <i id="addtables"><b>N + 10</b> <small>(use "Enter" key)</small></i>        <i id="addtables100"><b>N + 100</b></i><br/><br/><br/><br/> <i id="switchmode">Switch (0, N) and (- N / 2, N / 2) modes <small>(use "M" key)</small></i><br/><br/><br/><br/><br/><br/><br/><br/></span>';
document.getElementById('gr'+graph).style.background='#c0fac0';
}

function inct(n)
{
let tar=[];
let car=[];
for(let e=0;e<n;e++)
   car.push(0);
   
let maxc=0;
for(let e=0;e<n;e++)
   {let i=e*e%n;
   tar.push(i);
   car[i]++;
   if(car[i]>maxc)
      maxc++;
   }

let to=1.5;
let w=getw(n);
let tu=Math.floor(n/2-0.5);

let fsize=Math.floor(w*0.5);
if(fsize>16)
   fsize=16;

document.getElementById('th').innerHTML='<br/>N = '+n;

      let s=document.getElementById('svg');
      let g=document.getElementById('rc');
      s.setAttribute('width',w*(n+5));
      s.setAttribute('height',w*(n+maxc+to));
      
      let e=n-1;
      let re=document.createElementNS('http://www.w3.org/2000/svg','rect');
      re.setAttribute('id','r'+e);
      re.setAttribute('y',((n-1-e+mode*tu)%n)*w);
      re.setAttribute('x',tar[e]*w);
      re.setAttribute('width',w);
      re.setAttribute('height',w);
      re.style.fill='#ff0000';
      g.appendChild(re);
      
      re=document.createElementNS('http://www.w3.org/2000/svg','rect');
      re.setAttribute('id','g'+e);
      re.setAttribute('x',e*w);
      re.setAttribute('y',w*(n+maxc-car[e]+to));
      re.setAttribute('width',w-1);
      re.setAttribute('height',w*car[e]);
      re.style.fill='#a0d7d7';
      g.appendChild(re);
      
      for(e=0;e<n-1;e++)
      {re=document.getElementById('r'+e);
      re.setAttribute('y',((n-1-e+mode*tu)%n)*w);
      re.setAttribute('x',tar[e]*w);
      re.setAttribute('width',w);
      re.setAttribute('height',w);

      re=document.getElementById('g'+e);
      re.setAttribute('x',e*w);
      re.setAttribute('y',w*(n+maxc-car[e]+to));
      re.setAttribute('width',w-1);
      re.setAttribute('height',w*car[e]);
      }
      
      e=n;
      
      let li=document.createElementNS('http://www.w3.org/2000/svg','line');
      li.setAttribute('id','v'+e);
      li.setAttribute('x1',w*e+(e?-0.5:0.5));
      li.setAttribute('y1',0);
      li.setAttribute('x2',w*e+(e?-0.5:0.5));
      li.setAttribute('y2',w*n);
      li.setAttribute('stroke','black');
      s.appendChild(li);
      
      li=document.createElementNS('http://www.w3.org/2000/svg','line');
      li.setAttribute('id','h'+e);
      li.setAttribute('x1',0);
      li.setAttribute('y1',w*e+(e?-0.5:0.5));
      li.setAttribute('x2',w*n);
      li.setAttribute('y2',w*e+(e?-0.5:0.5));
      li.setAttribute('stroke','black');
      s.appendChild(li);

      for(e=0;e<n;e++)
      {li=document.getElementById('v'+e);
      li.setAttribute('x1',w*e+(e?-0.5:0.5));
      li.setAttribute('x2',w*e+(e?-0.5:0.5));
      li.setAttribute('y2',w*n);
      
      li=document.getElementById('h'+e);
      li.setAttribute('y1',w*e+(e?-0.5:0.5));
      li.setAttribute('x2',w*n);
      li.setAttribute('y2',w*e+(e?-0.5:0.5));}

      for(e=n-1;e<n;e++)
      {let t=document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('id','y'+e);
      t.setAttribute('x',n*w+7);
      t.setAttribute('y',(e+0.6)*w);
      t.setAttribute('font-size',fsize+'px');
      t.innerHTML=n-e-1;
      s.appendChild(t);
      
      t=document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('id','x'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',n*w+fsize+1);
      t.setAttribute('font-size',fsize+'px');
      t.setAttribute('text-anchor','middle');
      t.innerHTML=e-mode*tu;
      s.appendChild(t);
      
      t=document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('id','t'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',(n+maxc-car[e]+to-0.5)*w+fsize-1);
      t.setAttribute('font-size',fsize+'px');
      t.setAttribute('text-anchor','middle');
      t.innerHTML=car[e];
      s.appendChild(t);}
      
      for(e=0;e<n-1;e++)
      {let t=document.getElementById('t'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',(n+maxc-car[e]+to-0.5)*w+fsize-1);
      t.setAttribute('font-size',fsize+'px');
      t.innerHTML=car[e];
      
      t=document.getElementById('x'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',n*w+fsize+1);
      t.setAttribute('font-size',fsize+'px');
      t.setAttribute('text-anchor','middle');
      t.innerHTML=e-mode*tu;
      
      t=document.getElementById('y'+e);
      t.setAttribute('x',n*w+7);
      t.setAttribute('y',(e+0.6)*w);
      t.setAttribute('font-size',fsize+'px');
      t.innerHTML=n-e-1;
      }
}

function dect(n)
{
let tar=[];
let car=[];
for(let e=0;e<n;e++)
   car.push(0);
   
let maxc=0;
for(let e=0;e<n;e++)
   {let i=e*e%n;
   tar.push(i);
   car[i]++;
   if(car[i]>maxc)
      maxc++;
   }

let to=1.5;
let w=getw(n);
let tu=Math.floor(n/2-0.5);

let fsize=Math.floor(w*0.5);
if(fsize>16)
   fsize=16;

document.getElementById('th').innerHTML='<br/>N = '+n;

      let s=document.getElementById('svg');
      s.setAttribute('width',w*(n+5));
      s.setAttribute('height',w*(n+maxc+to));
      
      document.getElementById('r'+n).remove();
      document.getElementById('g'+n).remove();
      
      let e;
      let re;
      for(e=0;e<n;e++)
      {re=document.getElementById('r'+e);
      re.setAttribute('y',((e+mode*tu)%n)*w);
      re.setAttribute('x',(n-tar[e]-1)*w);
      re.setAttribute('width',w);
      re.setAttribute('height',w);

      re=document.getElementById('g'+e);
      re.setAttribute('x',e*w);
      re.setAttribute('y',w*(n+maxc-car[e]+to));
      re.setAttribute('width',w-1);
      re.setAttribute('height',w*car[e]);
      }
       
      document.getElementById('h'+(n+1)).remove();
      document.getElementById('v'+(n+1)).remove();

      for(e=0;e<=n;e++)
      {let li=document.getElementById('v'+e);
      li.setAttribute('x1',w*e+(e?-0.5:0.5));
      li.setAttribute('x2',w*e+(e?-0.5:0.5));
      li.setAttribute('y2',w*n);
      
      li=document.getElementById('h'+e);
      li.setAttribute('y1',w*e+(e?-0.5:0.5));
      li.setAttribute('x2',w*n);
      li.setAttribute('y2',w*e+(e?-0.5:0.5));}

      document.getElementById('x'+n).remove();
      document.getElementById('y'+n).remove();
      document.getElementById('t'+n).remove();
          
      for(e=0;e<n;e++)
      {let t=document.getElementById('t'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',(n+maxc-car[e]+to-0.5)*w+fsize-1);
      t.setAttribute('font-size',fsize+'px');
      t.innerHTML=car[e];
      
      t=document.getElementById('x'+e);
      t.setAttribute('x',(e+0.5)*w);
      t.setAttribute('y',n*w+fsize+1);
      t.setAttribute('font-size',fsize+'px');
      t.setAttribute('text-anchor','middle');
      t.innerHTML=e-mode*tu;
      
      t=document.getElementById('y'+e);
      t.setAttribute('x',n*w+7);
      t.setAttribute('y',(e+0.6)*w);
      t.setAttribute('font-size',fsize+'px');
      t.innerHTML=n-e-1;
      }
}

document.addEventListener('keydown',function(e){
if(!e.ctrlKey){
let c=e.code;
if(c=='Space'){
   nextn++;
   addtable(nextn);
   //listc.scrollTop=listc.scrollHeight;
   }
if(c=='Backspace'){
   if(nextn>2)
      {nextn--;
      addtable(nextn);
      }
   }
else if(c=='Enter')
   {
   /*for(let e=0;e<10;e++)
      {nextn++;
      addtable(nextn);
      }*/
   nextn+=10;
   addtable(nextn);
   //listc.scrollTop=listc.scrollHeight;
   }
else if(c=='KeyM')
   {
   if(graph==1)
   {mode=1-mode;
   for(let n=nextn;n<=nextn;n++)
      {let w=getw(n);
      let to=Math.floor(n/2-0.5);
      for(let e=0;e<n;e++)
         {
         let re=document.getElementById('r'+e);
         re.setAttribute('y',((n-1-e+mode*to)%n)*w);
         let t=document.getElementById('y'+e);
         t.innerHTML=n-e-1-mode*to;
         re=document.getElementById('zerostring');
         re.setAttribute('y',((n-1-mode*to)%n)*w);
         }
      }
   }
   }
else if(c=='Digit1')
   {if(graph!=1)
      {graph=1;
      switchmode.hidden=false;
      addtable(nextn);
      }
   }
else if(c=='Digit2')
   {if(graph!=2)
      {graph=2;
      switchmode.hidden=true;
      addtable(nextn);
      }
   }
else if(c=='Digit3')
   {if(graph!=3)
      {graph=3;
      switchmode.hidden=true;
      addtable(nextn);
      }
   }
else if(c=='Digit4')
   {if(graph!=4)
      {graph=4;
      switchmode.hidden=true;
      addtable(nextn);
      }
   }
}}
);

listc.onclick=function(e){
let c=e.target;
while(c.tagName=='B'||c.tagName=='SMALL'||c.tagName=='BIG')
   c=c.parentNode;
if(c.id=='addtable')
   {nextn++;
   addtable(nextn);
   listc.scrollTop=listc.scrollHeight;
   }
   else if(c.id=='addtables')
   {
   /*for(let e=0;e<10;e++)
      {nextn++;
      addtable(nextn);
      }*/
   nextn+=10;
   addtable(nextn);
   listc.scrollTop=listc.scrollHeight;
   }
   else if(c.id=='addtables100')
   {
   nextn+=100;
   addtable(nextn);
   listc.scrollTop=listc.scrollHeight;
   }
   else if(c.id=='removetable')
   {
   if(nextn>2)
      {nextn--;
      addtable(nextn);
      listc.scrollTop=listc.scrollHeight;
      }
   }
   else if(c.id=='removetables10')
   {
   nextn-=10;
   if(nextn<2)nextn=2;
   addtable(nextn);
   listc.scrollTop=listc.scrollHeight;
   }
   else if(c.id=='removetables100')
   {
   nextn-=100;
   if(nextn<2)nextn=2;
   addtable(nextn);
   listc.scrollTop=listc.scrollHeight;
   }
   else if(c.id=='switchmode')
      {if(graph==1)
      {mode=1-mode;
      for(let n=nextn;n<=nextn;n++)
         {let w=getw(n);
         let to=Math.floor(n/2-0.5);
         for(let e=0;e<n;e++)
            {
            let re=document.getElementById('r'+e);
            re.setAttribute('y',((n-1-e+mode*to)%n)*w);
            let t=document.getElementById('y'+e);
            t.innerHTML=n-e-1-mode*to;
            re=document.getElementById('zerostring');
            re.setAttribute('y',((n-1-mode*to)%n)*w);
            }
         }
      listc.scrollTop=listc.scrollHeight;
      }
      }
   else if(c.id=='gr1')
      {if(graph!=1)
         {graph=1;
         switchmode.hidden=false;
         addtable(nextn);
         }
      }
   else if(c.id=='gr2')
      {if(graph!=2)
         {graph=2;
         switchmode.hidden=true;
         addtable(nextn);
         }
      }
   else if(c.id=='gr3')
      {if(graph!=3)
         {graph=3;
         switchmode.hidden=true;
         addtable(nextn);
         }
      }
   else if(c.id=='gr4')
      {if(graph!=4)
         {graph=4;
         switchmode.hidden=true;
         addtable(nextn);
         }
      }
}


window.onkeydown = function(e) { 
  return !((e.keyCode==32) && e.target == document.body);
};


function check(n)
{let c=[];
let e;
for(e=0;e<n;e++)
   c.push(0);
let i=0;
e=0;
while(e<n&&c[i]<3)
   {i=e*e%n;
   c[i]++;
   e++;
   }
return e==n;
}

function addfn1(n)
{while(fn[7].length<=n)
   fn[7].push(fn[7].length*fn[7].length);
}

function addfn2(n)
{while(fn[0].length<=n)
   {setar(fn[0].length);
   fn[0].push(maxc);
   fn[1].push(maxcz);
   fn[2].push(car[0]);
   }
}

function addfn3(n)
{fn[3]=[0];
fn[4]=[0];
fn[5]=[0];
while(fn[3].length<=n)
   {let l=fn[3].length;
   setar(l);
   let aar=[];
   let e;
   for(e=0;e<l;e++)
      aar.push(-1);
   for(e=0;e<l;e++)
      if(aar[tar[e]]<0)
         aar[tar[e]]=e;
   let i=0;
   for(e of aar)if(e>0)i+=e;
   fn[3].push(i%n);
   let u=Math.floor(l/2);
   i=u*(u+1)/2;
   fn[5].push(i%n);
   if(!(l%2))
      i-=l/2;
   fn[4].push(i%n);
   }
}

function addfn4(n)
{while(fn[6].length<=n)
   {setar(fn[6].length);
   let i=0;
   for(let e of car)if(e)i++;
   fn[6].push(i);
   }
}

let mode=0;
let nextn=2;
let tar,car,maxc,maxcz;
let fn=[[],[],[],[],[],[],[],[]];
for(let e=0;e<fn.length;e++)
   fn[e].push(0);
let cgr=['orange','green','blue','gray','deeppink','skyblue','purple'];
let wgr=[5,15,15,5,10,15,5];
let fgr=['rect','polygon','circle','rect','polygon','circle','rect'];
let tgr=['max multiplicity','max multiplicity except zero','multiplicity of zero','sum of min roots','sum of roots < N / 2','sum of roots ≤ N / 2','number of x: ∃ √x'];

let graph=1;
   
addfn1(100);
addfn2(100);
addfn3(100);
addfn4(100);
   
addtable(nextn);
if(graph>1)switchmode.hidden=true;

//nextn=110;
/*
//listc.innerHTML+='<br/><br/>';
for(let e=10000000;e<=10000100;e++)
   if(check(e))
      listc.innerHTML+=e+'<br/>';
*/



</script></div></body></html>
